# 图形渲染管线(Graphics Pipeline)
> 图形渲染管线可以被划分为两个主要部分：
> 
- 第一部分把你的3D坐标转换为2D坐标
- 第二部分是把2D坐标转变为实际的有颜色的像素。


> 实际上是一堆原始图形数据途经一个输送管道，期间经过各种变化处理最终出现在屏幕的过程。

![](http://i.imgur.com/0o9O5Sn.jpg)

<p align="center"><b>一个图形渲染管线的每个阶段的抽象展示。要注意蓝色部分代表的是我们可以注入自定义的着色器的部分。</b></p>

----------

> 顶点着色器(Vertex Shader)

把一个单独的顶点作为输入。顶点着色器主要的目的是把3D坐标转为另一种3D坐标，同时顶点着色器允许我们对顶点属性进行一些基本处理。

简单来说应该就是输入顶点坐标。--- 描点

----------
> 图元装配(Primitive Assembly)

将顶点着色器输出的所有顶点作为输入（如果是GL_POINTS，那么就是一个顶点），并所有的点装配成指定图元的形状。

简单来说就是指定顶点和图元形状画出图形。--- 画图


----------
> 几何着色器(Geometry Shader)

把图元形式的一系列顶点的集合作为输入，它可以通过产生新顶点构造出新的（或是其它的）图元来生成其他形状。

简单来说就是对图元装配阶段的输出图形添加细节，相当于在原图形中划分新的图形。--- 细化


----------
> 光栅化阶段(Rasterization Stage)

把图元映射为最终屏幕上相应的像素，生成供片段着色器(Fragment Shader)使用的片段(Fragment)。在片段着色器运行之前会执行裁切(Clipping)。裁切会丢弃超出你的视图以外的所有像素，用来提升执行效率。

简单来说就是把几何图元数字化存储。--- 数字化

----------
> 片段着色器

计算一个像素的最终颜色，这也是所有OpenGL高级效果产生的地方。通常，片段着色器包含3D场景的数据（比如光照、阴影、光的颜色等等），这些数据可以被用来计算最终像素的颜色。

简单来说就是根据光栅化后的数据计算最后的颜色。--- 上色

----------
> Alpha测试和混合(Blending)阶段

检测片段的对应的深度（和模板(Stencil)）值，用它们来判断这个像素是其它物体的前面还是后面，决定是否应该丢弃。这个阶段也会检查alpha值（alpha值定义了一个物体的透明度）并对物体进行混合(Blend)。所以，即使在片段着色器中计算出来了一个像素输出的颜色，在渲染多个三角形的时候最后的像素颜色也可能完全不同。

简单来说就是根据实际情况对颜色进行再调整。--- 最终调整


----------

可以看到，图形渲染管线非常复杂，它包含很多可配置的部分。然而，对于大多数场合，我们只需要配置顶点和片段着色器就行了。几何着色器是可选的，通常使用它默认的着色器就行了。

在现代OpenGL中，我们必须定义至少一个顶点着色器和一个片段着色器（因为GPU中没有默认的顶点/片段着色器）。