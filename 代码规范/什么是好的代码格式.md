# 代码的格式
> 我们应该保持良好的代码格式。应该选用一套管理代码格式的简单规则，然后贯彻这些规则。如果在团队中工作，则团队应该采用统一的简单的格式规则。

## 格式的目的
代码格式关乎沟通，而沟通是专业开发者的头等大事。今天写的功能，可能在下一版本中被修改，但代码风格和可读性仍然会影响到可维护性和扩展性。

## 垂直格式
尽量用大多数为200行，最长500行的单个文件构造出色的系统。短文件通常比长文件易于理解。

### 向报纸学习
写的很好看的报纸，是从上往下阅读。顶部有头条，告诉你主题，好让你决定是否继续读下去。第一段是大纲，给出概述，但隐藏了故事细节。接着读下去，细节逐渐增加。

源文件也要像报纸一样。名称简单而且一目了然。最顶部应该给出高层次概念和算法。细节往下逐步展开，知道最底层的函数和细节。

### 概念间垂直方向上的间隔
几乎所有代码都是从上往下读，从左往右读。每行展现一个表达式或一个子句。每组代码行展示一条完整的思路。这些思路用空白行区隔开。

### 垂直方向上的靠近
如果说空白行隔开了概念，靠近的代码则暗示了它们之间的紧密关系。所以，关系紧密的代码应该互相靠近。

### 垂直距离
除非有很好的理由，否则不要把关系密切的概念放到不同的文件中。实际上，这也是避免使用protected变量的理由之一。

对于那些关系密切、放置于同一源文件中国的概念，它们之间的区隔应该成为相互的易懂度的衡量标准，应该避免迫使读者在源文件和类之间跳来跳去。

> 变量声明

> 变量声明应该尽可能靠近使用位置。因为函数很短，本地变量应该在函数顶部出现。循环中的控制变量应该总在循环语句中声明。偶尔在某个较长的函数中，变量也可以在某个代码块顶部，或者在循环之前声明。实体变量应该在类的顶部声明。C++通常放在底部，java习惯放在顶部。


----------
> 相关函数

> 某个函数调用了另外一个，就应该把它们放到一起，而且调用者应尽可能放在被调用者上面。这样，程序就有了自然的顺序。


----------
> 概念相关

> 概念相关代码应该放到一起，相关性越强，距离应该越短。

## 横向格式
> 应该尽量保持代码行短小

### 水平方向上的区隔和靠近
使用空格将彼此紧密相关的事物连接到一起，也用空格字符把相关性较弱的事物隔开。

- 赋值操作两边加上空格字符，用来加强左边和右边的区别。
- 不要在函数名和左圆括号中间加空格，因为函数与其参数密切相关。
- 函数中的参数会用空格一一隔开，表示参数之间相互分离。
- 在运算符前面加空格来表示其优先级。

### 缩进
源文件是一种继承结构，而不是大纲结构。其中的信息设计整个文件、文件中每个类、类中的方法、方法中的代码块，也涉及代码块中的代码块。这种继承结构中每一个层级都有一个范围，名称可以在其中声明，而声明和执行语句也可以在其中解释。

要让这种范围式继承结构可见，就需要缩进处理。在文件的顶层语句，例如大多数类声明，根本不缩进，类中的方法对应该类缩进一个层级。方法的实现相对方法的声明缩进一个层级。代码块的实现相对于其容器代码块缩进一个层级，以此类推。

### 空范围
有时，while或者for语句的语句体为空，尽量不要使用这种结构，如果无法避免，就确保空范围体的缩进，用括号包围起来。
